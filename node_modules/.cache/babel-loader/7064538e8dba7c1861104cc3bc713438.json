{"remainingRequest":"/Users/dokyun.kim/mapbox-pwa/node_modules/babel-loader/lib/index.js!/Users/dokyun.kim/mapbox-pwa/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/dokyun.kim/mapbox-pwa/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/dokyun.kim/mapbox-pwa/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/dokyun.kim/mapbox-pwa/node_modules/vue-mapbox/src/components/UI/Marker.vue?vue&type=template&id=530f7769","dependencies":[{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/vue-mapbox/src/components/UI/Marker.vue","mtime":499162500000},{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1628298225000},{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/dokyun.kim/mapbox-pwa/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlQ29tbWVudFZOb2RlIGFzIF9jcmVhdGVDb21tZW50Vk5vZGUsIHJlbmRlclNsb3QgYXMgX3JlbmRlclNsb3QsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVFbGVtZW50QmxvY2sgYXMgX2NyZWF0ZUVsZW1lbnRCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIHN0eWxlOiB7CiAgICAiZGlzcGxheSI6ICJub25lIgogIH0KfTsKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlRWxlbWVudEJsb2NrKCJkaXYiLCBfaG9pc3RlZF8xLCBbX2NyZWF0ZUNvbW1lbnRWTm9kZSgiIHNsb3QgZm9yIGN1c3RvbSBtYXJrZXIgIiksIF9yZW5kZXJTbG90KF9jdHguJHNsb3RzLCAibWFya2VyIiksIF9jcmVhdGVDb21tZW50Vk5vZGUoIiBzbG90IGZvciBwb3B1cCAiKSwgJGRhdGEubWFya2VyID8gX3JlbmRlclNsb3QoX2N0eC4kc2xvdHMsICJkZWZhdWx0IiwgewogICAga2V5OiAwCiAgfSkgOiBfY3JlYXRlQ29tbWVudFZOb2RlKCJ2LWlmIiwgdHJ1ZSldKTsKfQ=="},{"version":3,"sources":["/Users/dokyun.kim/mapbox-pwa/node_modules/vue-mapbox/src/components/UI/Marker.vue"],"names":[],"mappings":";;AACO,EAAA,KAAqB,EAArB;AAAA,eAAA;AAAA;;;uBAAL,mBAAA,CAKM,KALN,EAAA,UAAA,EAKM,CAJJ,mBAAA,CAAA,0BAAA,CAII,EAHJ,WAAA,CAAsB,IAAA,CAAA,MAAtB,EAAsB,QAAtB,CAGI,EAFJ,mBAAA,CAAA,kBAAA,CAEI,EADQ,KAAA,CAAA,M,GAAZ,WAAA,CAAsB,IAAA,CAAA,MAAtB,EAAsB,SAAtB,EAAsB;AAAA,IAAA,GAAA,EAAA;AAAA,GAAtB,C,oCACI,CALN,C","sourcesContent":["<template>\n  <div style=\"display: none\">\n    <!-- slot for custom marker -->\n    <slot name=\"marker\" />\n    <!-- slot for popup -->\n    <slot v-if=\"marker\" />\n  </div>\n</template>\n\n<script>\nimport withEvents from \"../../lib/withEvents\";\nimport withSelfEvents from \"./withSelfEvents\";\n\nconst markerEvents = {\n  drag: \"drag\",\n  dragstart: \"dragstart\",\n  dragend: \"dragend\"\n};\n\nconst markerDOMEvents = {\n  click: \"click\",\n  mouseenter: \"mouseenter\",\n  mouseleave: \"mouseleave\"\n};\n\nexport default {\n  name: \"MapMarker\",\n  mixins: [withEvents, withSelfEvents],\n\n  inject: [\"mapbox\", \"map\"],\n\n  provide() {\n    const self = this;\n    return {\n      get marker() {\n        return self.marker;\n      }\n    };\n  },\n\n  props: {\n    // mapbox marker options\n    offset: {\n      type: [Object, Array],\n      default: () => [0, 0]\n    },\n    coordinates: {\n      type: Array,\n      required: true\n    },\n    color: {\n      type: String\n    },\n    anchor: {\n      type: String,\n      default: \"center\"\n    },\n    draggable: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      initial: true,\n      marker: undefined\n    };\n  },\n\n  watch: {\n    coordinates(lngLat) {\n      if (this.initial) return;\n      this.marker.setLngLat(lngLat);\n    },\n    draggable(next) {\n      if (this.initial) return;\n      this.marker.setDraggable(next);\n    }\n  },\n\n  mounted() {\n    const markerOptions = {\n      ...this.$props\n    };\n    if (this.$slots.marker) {\n      markerOptions.element = this.$slots.marker[0].elm;\n    }\n    this.marker = new this.mapbox.Marker(markerOptions);\n\n    if (this.$listeners[\"update:coordinates\"]) {\n      this.marker.on(\"dragend\", event => {\n        let newCoordinates;\n        if (this.coordinates instanceof Array) {\n          newCoordinates = [event.target._lngLat.lng, event.target._lngLat.lat];\n        } else {\n          newCoordinates = event.target._lngLat;\n        }\n        this.$emit(\"update:coordinates\", newCoordinates);\n      });\n    }\n\n    const eventNames = Object.keys(markerEvents);\n    this.$_bindSelfEvents(eventNames, this.marker);\n\n    this.initial = false;\n    this.$_addMarker();\n  },\n\n  beforeDestroy() {\n    if (this.map !== undefined && this.marker !== undefined) {\n      this.marker.remove();\n    }\n  },\n\n  methods: {\n    $_addMarker() {\n      this.marker.setLngLat(this.coordinates).addTo(this.map);\n      this.$_bindMarkerDOMEvents();\n      this.$_emitEvent(\"added\", { marker: this.marker });\n    },\n\n    $_emitSelfEvent(event) {\n      this.$_emitMapEvent(event, { marker: this.marker });\n    },\n\n    $_bindMarkerDOMEvents() {\n      Object.keys(this.$listeners).forEach(key => {\n        if (Object.values(markerDOMEvents).includes(key)) {\n          this.marker._element.addEventListener(key, event => {\n            this.$_emitSelfEvent(event);\n          });\n        }\n      });\n    },\n\n    remove() {\n      this.marker.remove();\n      this.$_emitEvent(\"removed\");\n    },\n\n    togglePopup() {\n      return this.marker.togglePopup();\n    }\n  }\n};\n</script>\n"],"sourceRoot":""}]}